<!-- beyondBINARY quantum-prefixed | uvspeed | {+1, 1, -1, +0, 0, -0, +n, n, -n} -->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="theme-color" content="#050810">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<link rel="icon" type="image/png" sizes="32x32" href="../icons/favicon.png">
<link rel="apple-touch-icon" sizes="192x192" href="../icons/icon-192.png">
<title>FreyaUnits — Galactic Precision Converter</title>
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box;}
html{scroll-behavior:smooth;scrollbar-width:thin;scrollbar-color:#1e2d4a #050810;}
body{background:#050810;color:#e2e8f0;font-family:-apple-system,'SF Pro Display',BlinkMacSystemFont,'Segoe UI',system-ui,sans-serif;line-height:1.6;overflow-x:hidden;}
a{color:#7c3aed;text-decoration:none;}a:hover{text-decoration:underline;}
code{font-family:'SF Mono','Fira Code',monospace;font-size:.8125em;background:#0a0f1a;padding:2px 6px;border-radius:4px;}
::-webkit-scrollbar{width:6px;}::-webkit-scrollbar-track{background:#050810;}::-webkit-scrollbar-thumb{background:#1e2d4a;border-radius:3px;}

.rainbow{display:flex;flex-shrink:0;height:3px;width:100%;}
.rainbow span{flex:1;}
.r1{background:#7c3aed;}.r2{background:#06b6d4;}.r3{background:#a78bfa;}.r4{background:#22d3ee;}.r5{background:#8b5cf6;}.r6{background:#34d399;}
.rainbow-glow{height:60px;width:100%;background:linear-gradient(180deg,rgba(124,58,237,0.08) 0%,rgba(6,182,212,0.06) 33%,rgba(139,92,246,0.04) 66%,transparent 100%);}

.hero{position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;padding:80px 24px 60px;text-align:center;overflow:hidden;}
#hero-canvas{position:absolute;inset:0;z-index:0;}
.nebula{position:absolute;border-radius:50%;filter:blur(120px);opacity:0.12;pointer-events:none;z-index:0;}
.n1{width:600px;height:600px;background:radial-gradient(circle,#7c3aed,transparent);top:-10%;left:-5%;}
.n2{width:500px;height:500px;background:radial-gradient(circle,#06b6d4,transparent);bottom:-5%;right:-8%;}
.n3{width:400px;height:400px;background:radial-gradient(circle,#8b5cf6,transparent);top:40%;left:50%;}
.hero-content{position:relative;z-index:1;max-width:760px;}
.hero-badge{display:inline-block;font-family:'SF Mono',monospace;font-size:.6875rem;color:#64748b;border:1px solid #1e2d4a;border-radius:999px;padding:4px 14px;margin-bottom:24px;background:rgba(10,15,26,0.8);backdrop-filter:blur(8px);}
.hero-badge .dot{display:inline-block;width:6px;height:6px;border-radius:50%;background:#34d399;margin-right:6px;vertical-align:middle;}
.hero h1{font-size:clamp(2.5rem,6vw,4.5rem);font-weight:800;letter-spacing:-2px;line-height:1.05;margin-bottom:16px;}
.hero h1 .gradient{background:linear-gradient(135deg,#7c3aed 0%,#06b6d4 40%,#a78bfa 70%,#22d3ee 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
.hero p{font-size:1.125rem;color:#64748b;max-width:560px;margin:0 auto 32px;}
.hero-actions{display:flex;gap:12px;justify-content:center;flex-wrap:wrap;}
.btn{display:inline-flex;align-items:center;gap:8px;padding:12px 28px;border-radius:8px;border:none;font-size:.9375rem;font-weight:600;cursor:pointer;text-decoration:none;transition:all .2s;font-family:inherit;}
.btn-primary{background:linear-gradient(135deg,#7c3aed,#06b6d4,#a78bfa,#22d3ee);background-size:300% 300%;animation:gradShift 4s ease infinite;color:#050810;}
.btn-primary:hover{transform:translateY(-2px);box-shadow:0 8px 30px rgba(124,58,237,0.3);text-decoration:none;}
.btn-secondary{background:rgba(10,15,26,0.8);color:#e2e8f0;border:1px solid #1e2d4a;backdrop-filter:blur(8px);}
.btn-secondary:hover{background:#101828;border-color:#334155;text-decoration:none;}
@keyframes gradShift{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}

.stats-ribbon{display:flex;justify-content:center;gap:40px;padding:32px 24px;border-top:1px solid #1e2d4a;border-bottom:1px solid #1e2d4a;background:#0a0f1a;flex-wrap:wrap;}
.stat{text-align:center;}.stat .number{font-family:'SF Mono',monospace;font-size:2rem;font-weight:800;background:linear-gradient(135deg,#7c3aed,#06b6d4);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
.stat .label{font-size:.75rem;color:#64748b;text-transform:uppercase;letter-spacing:1px;margin-top:2px;}

section{max-width:1100px;margin:0 auto;padding:80px 24px;}
section h2{font-size:2rem;font-weight:700;letter-spacing:-.5px;margin-bottom:8px;}
.section-sub{color:#64748b;font-size:1rem;margin-bottom:48px;max-width:600px;}
.fade-up{opacity:0;transform:translateY(24px);transition:opacity .6s ease,transform .6s ease;}
.fade-up.visible{opacity:1;transform:translateY(0);}

.scale-wrap{width:100%;max-width:900px;margin:0 auto 48px;}
.scale-canvas{width:100%;height:160px;border-radius:12px;border:1px solid #1e2d4a;background:rgba(10,15,26,0.7);cursor:crosshair;display:block;}
.scale-hint{font-size:.6875rem;color:#475569;margin-top:8px;text-align:center;font-family:'SF Mono',monospace;}

.cat-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:12px;}
.cat-card{background:#0a0f1a;border:1px solid #1e2d4a;border-radius:12px;padding:20px;transition:all .2s;}
.cat-card:hover{border-color:#334155;transform:translateY(-2px);box-shadow:0 6px 20px rgba(0,0,0,0.4);}
.cat-card h4{font-size:.875rem;font-weight:700;margin-bottom:4px;display:flex;align-items:center;gap:8px;}
.cat-card .units{font-size:.6875rem;color:#64748b;line-height:1.4;}

.converter-demo{display:grid;grid-template-columns:1fr auto 1fr;gap:12px;align-items:end;max-width:700px;margin:0 auto 32px;}
.conv-group{display:flex;flex-direction:column;gap:4px;}
.conv-group label{font-size:.6875rem;color:#64748b;font-family:'SF Mono',monospace;}
.conv-group input,.conv-group select{background:#0a0f1a;color:#e2e8f0;border:1px solid #1e2d4a;border-radius:8px;padding:10px 14px;font-family:'SF Mono',monospace;font-size:.875rem;outline:none;}
.conv-group input:focus,.conv-group select:focus{border-color:#7c3aed;}
.conv-swap{background:none;border:1px solid #1e2d4a;color:#a78bfa;border-radius:50%;width:40px;height:40px;cursor:pointer;font-size:1.25rem;display:flex;align-items:center;justify-content:center;transition:all .2s;margin-bottom:2px;}
.conv-swap:hover{background:#101828;border-color:#7c3aed;transform:rotate(180deg);}
.conv-result{text-align:center;font-family:'SF Mono',monospace;font-size:1.5rem;font-weight:800;color:#22d3ee;margin-bottom:8px;}
.conv-quantum{text-align:center;font-size:.6875rem;color:#64748b;font-family:'SF Mono',monospace;line-height:1.8;}

.roadmap-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:16px;}
.road-card{background:#0a0f1a;border:1px solid #1e2d4a;border-radius:12px;padding:24px;transition:all .25s;}
.road-card:hover{border-color:#334155;transform:translateY(-2px);box-shadow:0 8px 24px rgba(0,0,0,0.4);}
.road-card h4{font-size:1rem;font-weight:700;margin-bottom:8px;display:flex;align-items:center;gap:8px;}
.road-card .chip{font-size:.5625rem;font-family:'SF Mono',monospace;padding:2px 8px;border-radius:999px;}
.road-card ul{list-style:none;padding:0;}
.road-card ul li{font-size:.75rem;color:#94a3b8;padding:3px 0;display:flex;gap:8px;}
.road-card ul li::before{content:'';display:inline-block;width:4px;height:4px;border-radius:50%;margin-top:6px;flex-shrink:0;}

.cta-section{position:relative;text-align:center;padding:100px 24px;overflow:hidden;}
#cta-canvas{position:absolute;inset:0;z-index:0;}
.cta-content{position:relative;z-index:1;}

.footer-bar{padding:24px;text-align:center;border-top:1px solid #1e2d4a;font-size:.6875rem;color:#475569;font-family:'SF Mono',monospace;}

@media(max-width:768px){
    .hero h1{font-size:2rem;letter-spacing:-1px;}
    .hero p{font-size:.9375rem;}
    section{padding:60px 16px;}
    .stats-ribbon{gap:20px;}.stat .number{font-size:1.5rem;}
    .converter-demo{grid-template-columns:1fr;gap:8px;}
    .conv-swap{margin:0 auto;}
}
</style>
</head>
<body>

<div class="rainbow"><span class="r1"></span><span class="r2"></span><span class="r3"></span><span class="r4"></span><span class="r5"></span><span class="r6"></span></div>
<div class="rainbow-glow"></div>

<div class="hero">
    <canvas id="hero-canvas"></canvas>
    <div class="nebula n1"></div>
    <div class="nebula n2"></div>
    <div class="nebula n3"></div>
    <div class="hero-content">
        <div class="hero-badge"><span class="dot"></span> 27 units &middot; 9 categories &middot; Planck to Parsec</div>
        <h1><span class="gradient">FreyaUnits</span></h1>
        <div style="font-family:'SF Mono','Fira Code',monospace;font-size:clamp(.75rem,1.8vw,1rem);color:#64748b;margin-bottom:8px;letter-spacing:.5px;">
            Galactic Precision Converter
        </div>
        <div style="font-family:'SF Mono',monospace;font-size:clamp(.6875rem,1.5vw,.875rem);color:#475569;margin-bottom:24px;font-style:italic;">
            "A father's love, measured in infinite precision"
        </div>
        <p>
            Convert any length from the Planck scale (10<sup>-35</sup> m) to parsecs (10<sup>16</sup> m) with quantum property calculations, celestial charts, and geo-spatial navigation — all in the browser.
        </p>
        <div class="hero-actions">
            <a class="btn btn-primary" href="freya.html">Open Converter</a>
            <a class="btn btn-secondary" href="https://github.com/fornevercollective/uvspeed" target="_blank">View Source</a>
        </div>
    </div>
</div>

<div class="stats-ribbon">
    <div class="stat"><div class="number">27</div><div class="label">Units</div></div>
    <div class="stat"><div class="number">9</div><div class="label">Categories</div></div>
    <div class="stat"><div class="number">51</div><div class="label">Orders of Magnitude</div></div>
    <div class="stat"><div class="number" id="st-bench">0</div><div class="label">&mu;s / conversion</div></div>
    <div class="stat"><div class="number">0</div><div class="label">Dependencies</div></div>
</div>

<!-- Scale Canvas -->
<section>
    <h2 class="fade-up">The logarithmic scale</h2>
    <p class="section-sub fade-up">51 orders of magnitude on a single canvas. Hover to explore, click to convert.</p>
    <div class="scale-wrap fade-up">
        <canvas class="scale-canvas" id="scale-canvas" height="160"></canvas>
        <div class="scale-hint">10<sup>-35</sup> m (Planck length) ←→ 10<sup>16</sup> m (Parsec) &middot; hover for details</div>
    </div>
</section>

<div class="rainbow"><span class="r1"></span><span class="r2"></span><span class="r3"></span><span class="r4"></span><span class="r5"></span><span class="r6"></span></div>

<!-- Unit Categories -->
<section>
    <h2 class="fade-up">9 categories, 27 units</h2>
    <p class="section-sub fade-up">From virtual particle pairs to intergalactic distances. Every unit mapped to its physical domain.</p>
    <div class="cat-grid fade-up" id="cat-grid"></div>
</section>

<!-- Live Converter -->
<section>
    <h2 class="fade-up">Try it now</h2>
    <p class="section-sub fade-up">Instant conversion with quantum property readout. No install, no sign-up.</p>
    <div class="converter-demo fade-up">
        <div class="conv-group">
            <label>FROM</label>
            <input type="number" id="conv-val" value="1" step="any">
            <select id="conv-from"></select>
        </div>
        <button class="conv-swap" id="conv-swap" title="Swap">&harr;</button>
        <div class="conv-group">
            <label>TO</label>
            <div class="conv-result" id="conv-result">—</div>
            <select id="conv-to"></select>
        </div>
    </div>
    <div class="conv-quantum fade-up" id="conv-quantum"></div>
</section>

<div class="rainbow"><span class="r1"></span><span class="r2"></span><span class="r3"></span><span class="r4"></span><span class="r5"></span><span class="r6"></span></div>

<!-- Roadmap -->
<section>
    <h2 class="fade-up">Roadmap</h2>
    <p class="section-sub fade-up">Where FreyaUnits is today and where it's heading.</p>
    <div class="roadmap-grid fade-up">
        <div class="road-card">
            <h4><span class="chip" style="background:rgba(52,211,153,.15);color:#34d399;">Shipped</span> Current</h4>
            <ul>
                <li style="--c:#34d399;"><span style="color:#34d399;">&#10003;</span> 27-unit precision converter</li>
                <li style="--c:#34d399;"><span style="color:#34d399;">&#10003;</span> Scientific calculator (mathjs)</li>
                <li style="--c:#34d399;"><span style="color:#34d399;">&#10003;</span> Celestial zodiac charts</li>
                <li style="--c:#34d399;"><span style="color:#34d399;">&#10003;</span> Quantum geo-spatial navigation</li>
                <li style="--c:#34d399;"><span style="color:#34d399;">&#10003;</span> Quantum property readout</li>
                <li style="--c:#34d399;"><span style="color:#34d399;">&#10003;</span> Offline-first PWA</li>
                <li style="--c:#34d399;"><span style="color:#34d399;">&#10003;</span> Plotly 3D visualization</li>
            </ul>
        </div>
        <div class="road-card">
            <h4><span class="chip" style="background:rgba(124,58,237,.15);color:#a78bfa;">Next</span> Coming Soon</h4>
            <ul>
                <li><span style="color:#a78bfa;">&#9702;</span> DNA sequence scale mapping</li>
                <li><span style="color:#a78bfa;">&#9702;</span> Audio frequency &#8596; wavelength</li>
                <li><span style="color:#a78bfa;">&#9702;</span> AI unit suggestions</li>
                <li><span style="color:#a78bfa;">&#9702;</span> History timeline integration</li>
                <li><span style="color:#a78bfa;">&#9702;</span> Carbon dating calculator</li>
                <li><span style="color:#a78bfa;">&#9702;</span> Fiber optic latency calc</li>
            </ul>
        </div>
        <div class="road-card">
            <h4><span class="chip" style="background:rgba(6,182,212,.15);color:#22d3ee;">Vision</span> Future</h4>
            <ul>
                <li><span style="color:#22d3ee;">&#9702;</span> Voice-controlled conversion</li>
                <li><span style="color:#22d3ee;">&#9702;</span> VR spatial unit explorer</li>
                <li><span style="color:#22d3ee;">&#9702;</span> Quantum computer integration</li>
                <li><span style="color:#22d3ee;">&#9702;</span> CERN LHC data feeds</li>
                <li><span style="color:#22d3ee;">&#9702;</span> Multi-dimensional unit space</li>
                <li><span style="color:#22d3ee;">&#9702;</span> Collaborative research mode</li>
            </ul>
        </div>
    </div>
</section>

<!-- CTA -->
<div class="cta-section">
    <canvas id="cta-canvas"></canvas>
    <div class="cta-content">
        <h2 style="font-size:clamp(1.5rem,4vw,2.5rem);font-weight:800;margin-bottom:12px;">Start converting</h2>
        <p style="color:#64748b;margin-bottom:24px;max-width:400px;margin-left:auto;margin-right:auto;">Planck length to parsec in microseconds. No install. No sign-up. Just precision.</p>
        <div class="hero-actions">
            <a class="btn btn-primary" href="freya.html">Open FreyaUnits</a>
            <a class="btn btn-secondary" href="quantum-notepad.html">Open Notepad</a>
            <a class="btn btn-secondary" href="history.html">Open History</a>
        </div>
    </div>
</div>

<div class="rainbow"><span class="r1"></span><span class="r2"></span><span class="r3"></span><span class="r4"></span><span class="r5"></span><span class="r6"></span></div>

<div class="footer-bar">
    beyondBINARY &middot; {+1, 1, -1, +0, 0, -0, +n, n, -n} &middot; fornevercollective<br>
    <a href="https://github.com/fornevercollective/uvspeed" style="color:#64748b;">github.com/fornevercollective/uvspeed</a>
</div>

<script src="quantum-prefixes.js"></script>
<script>
'use strict';
(function(){
const QP = window.QuantumPrefixes;

// ── Units data ──
const c = 299792458, h = 6.62607015e-34;
const UNITS = [
    {sym:'lp', name:'Planck Length', m:1.616255e-35, cat:'quantum'},
    {sym:'am', name:'Attometer', m:1e-18, cat:'quantum'},
    {sym:'fm', name:'Femtometer', m:1e-15, cat:'nuclear'},
    {sym:'pm', name:'Picometer', m:1e-12, cat:'atomic'},
    {sym:'\u00c5', name:'Angstrom', m:1e-10, cat:'atomic'},
    {sym:'nm', name:'Nanometer', m:1e-9, cat:'molecular'},
    {sym:'\u00b5in', name:'Microinch', m:2.54e-8, cat:'precision'},
    {sym:'\u00b5m', name:'Micrometer', m:1e-6, cat:'micro'},
    {sym:'\u03bbIR', name:'IR Wavelength', m:10e-6, cat:'wave'},
    {sym:'mil', name:'Mil (thou)', m:2.54e-5, cat:'precision'},
    {sym:'mm', name:'Millimeter', m:1e-3, cat:'standard'},
    {sym:'cm', name:'Centimeter', m:1e-2, cat:'standard'},
    {sym:'in', name:'Inch', m:0.0254, cat:'standard'},
    {sym:'ft', name:'Foot', m:0.3048, cat:'standard'},
    {sym:'yd', name:'Yard', m:0.9144, cat:'standard'},
    {sym:'m', name:'Meter', m:1, cat:'standard'},
    {sym:'\u03bbRF', name:'RF Wavelength', m:1, cat:'wave'},
    {sym:'\u03bbVHF', name:'VHF Wavelength', m:3, cat:'wave'},
    {sym:'\u03bbAM', name:'AM Wavelength', m:300, cat:'wave'},
    {sym:'km', name:'Kilometer', m:1e3, cat:'large'},
    {sym:'mi', name:'Mile', m:1609.34, cat:'large'},
    {sym:'NM', name:'Nautical Mile', m:1852, cat:'large'},
    {sym:'\u03bbLF', name:'Long Wave', m:3000, cat:'wave'},
    {sym:'\u03bbELF', name:'ELF Wavelength', m:5e6, cat:'wave'},
    {sym:'AU', name:'Astronomical Unit', m:1.496e11, cat:'astro'},
    {sym:'ly', name:'Light Year', m:9.461e15, cat:'astro'},
    {sym:'pc', name:'Parsec', m:3.086e16, cat:'astro'},
];
const CAT_COLORS = {quantum:'#8b5cf6',nuclear:'#6366f1',atomic:'#3b82f6',molecular:'#06b6d4',precision:'#a3a3a3',micro:'#eab308',wave:'#f97316',standard:'#ef4444',large:'#dc2626',astro:'#84cc16'};
const CAT_NAMES = {quantum:'Quantum',nuclear:'Nuclear',atomic:'Atomic',molecular:'Molecular',precision:'Precision',micro:'Micro',wave:'Wave / EM',standard:'Standard',large:'Large',astro:'Astronomical'};

// ── Starfield ──
function initStarfield(cvs, count){
    if(!cvs)return;const ctx=cvs.getContext('2d');const stars=[];
    function resize(){cvs.width=cvs.parentElement.offsetWidth;cvs.height=cvs.parentElement.offsetHeight;}
    resize();window.addEventListener('resize',resize);
    for(let i=0;i<count;i++)stars.push({x:Math.random()*2000,y:Math.random()*800,r:Math.random()*1.2+.2,a:Math.random()*.6+.15,tw:Math.random()*2+.5,ph:Math.random()*Math.PI*2});
    let t=0;(function draw(){t+=.016;ctx.clearRect(0,0,cvs.width,cvs.height);
    stars.forEach(s=>{const fl=s.a*(0.6+0.4*Math.sin(t*s.tw+s.ph));ctx.beginPath();ctx.arc(s.x%cvs.width,s.y%cvs.height,s.r,0,Math.PI*2);ctx.fillStyle='rgba(167,139,250,'+fl+')';ctx.fill();});
    requestAnimationFrame(draw);})();
}

// ── Scale Canvas ──
function initScale(){
    const cv=document.getElementById('scale-canvas');if(!cv)return;
    const ctx=cv.getContext('2d');
    function resize(){cv.width=cv.parentElement.offsetWidth;cv.height=160;}resize();
    window.addEventListener('resize',()=>{resize();draw(-1);});
    const minLog=-35,maxLog=17,range=maxLog-minLog;
    let hoverX=-1;
    function draw(mx){
        const W=cv.width,H=cv.height;
        ctx.fillStyle='#050810';ctx.fillRect(0,0,W,H);
        // Grid lines
        for(let lg=minLog;lg<=maxLog;lg+=5){
            const x=((lg-minLog)/range)*(W-20)+10;
            ctx.strokeStyle='rgba(30,45,74,0.5)';ctx.lineWidth=1;
            ctx.beginPath();ctx.moveTo(x,0);ctx.lineTo(x,H);ctx.stroke();
            ctx.fillStyle='#475569';ctx.font='9px monospace';ctx.textAlign='center';
            ctx.fillText('10^'+lg,x,H-4);
        }
        // Unit markers
        UNITS.forEach(u=>{
            const log=Math.log10(u.m);const x=((log-minLog)/range)*(W-20)+10;
            ctx.fillStyle=CAT_COLORS[u.cat]||'#888';
            ctx.fillRect(x-1,8,2,H-24);
            ctx.font='bold 8px monospace';ctx.textAlign='center';
            ctx.fillText(u.sym,x,7);
        });
        // Hover
        if(mx>=0&&mx<W){
            const log=minLog+((mx-10)/(W-20))*range;
            const meters=Math.pow(10,log);
            ctx.fillStyle='rgba(124,58,237,0.15)';ctx.fillRect(mx-8,0,16,H);
            ctx.fillStyle='#a78bfa';ctx.fillRect(mx-1,8,3,H-24);
            ctx.fillStyle='#e2e8f0';ctx.font='bold 11px monospace';ctx.textAlign='center';
            ctx.fillText(meters.toExponential(2)+' m',mx,H-16);
            // Find nearest unit
            let nearest=UNITS[0],nd=Infinity;
            UNITS.forEach(u=>{const d=Math.abs(Math.log10(u.m)-log);if(d<nd){nd=d;nearest=u;}});
            if(nd<2){
                ctx.fillStyle='#22d3ee';ctx.font='10px monospace';
                ctx.fillText(nearest.name+' ('+nearest.sym+')',mx,26);
            }
        }
    }
    draw(-1);
    cv.addEventListener('mousemove',e=>{const r=cv.getBoundingClientRect();hoverX=(e.clientX-r.left)/(r.width)*cv.width;draw(hoverX);});
    cv.addEventListener('mouseleave',()=>{hoverX=-1;draw(-1);});
    cv.addEventListener('click',e=>{
        const r=cv.getBoundingClientRect();const mx=(e.clientX-r.left)/(r.width)*cv.width;
        const W=cv.width;const log=(-35)+((mx-10)/(W-20))*52;
        const meters=Math.pow(10,log);
        // Set converter value
        document.getElementById('conv-val').value=meters.toExponential(4);
        document.getElementById('conv-from').value=15;// meter
        convert();
    });
}

// ── Category Grid ──
function buildCatGrid(){
    const grid=document.getElementById('cat-grid');if(!grid)return;
    const cats={};UNITS.forEach(u=>{if(!cats[u.cat])cats[u.cat]=[];cats[u.cat].push(u);});
    Object.entries(cats).forEach(([cat,units])=>{
        const card=document.createElement('div');card.className='cat-card';
        const color=CAT_COLORS[cat]||'#888';
        card.innerHTML='<h4><span style="color:'+color+';">\u25cf</span> '+(CAT_NAMES[cat]||cat)+'</h4><div class="units">'+units.map(u=>u.sym+' \u2014 '+u.name).join('<br>')+'</div>';
        grid.appendChild(card);
    });
}

// ── Live Converter ──
function initConverter(){
    const fromSel=document.getElementById('conv-from'),toSel=document.getElementById('conv-to');
    if(!fromSel)return;
    UNITS.forEach((u,i)=>{
        fromSel.add(new Option(u.sym+' \u2014 '+u.name,i));
        toSel.add(new Option(u.sym+' \u2014 '+u.name,i));
    });
    fromSel.value=15;toSel.value=12;// meter -> inch
    document.getElementById('conv-val').addEventListener('input',convert);
    fromSel.addEventListener('change',convert);
    toSel.addEventListener('change',convert);
    document.getElementById('conv-swap').addEventListener('click',()=>{
        const tmp=fromSel.value;fromSel.value=toSel.value;toSel.value=tmp;convert();
    });
    convert();
}
function convert(){
    const val=parseFloat(document.getElementById('conv-val').value)||0;
    const fromU=UNITS[document.getElementById('conv-from').value];
    const toU=UNITS[document.getElementById('conv-to').value];
    const meters=val*fromU.m;const result=meters/toU.m;
    function fmt(v){if(v===0)return '0';const a=Math.abs(v);if(a>=1e12||a<1e-4)return v.toExponential(6);if(a>=1e6)return v.toLocaleString(undefined,{maximumFractionDigits:4});if(a>=1)return v.toLocaleString(undefined,{maximumFractionDigits:8});return v.toFixed(10).replace(/0+$/,'').replace(/\.$/,'');}
    document.getElementById('conv-result').textContent=fmt(result)+' '+toU.sym;
    // Quantum properties
    const qDiv=document.getElementById('conv-quantum');
    if(meters>0){
        const freq=c/meters,energy=h*freq,eV=energy/1.602176634e-19;
        qDiv.innerHTML='Frequency: '+freq.toExponential(4)+' Hz &nbsp;&middot;&nbsp; Energy: '+energy.toExponential(4)+' J ('+eV.toExponential(4)+' eV) &nbsp;&middot;&nbsp; Light travel: '+(meters/c).toExponential(4)+' s';
    } else qDiv.textContent='Enter a value to see quantum properties.';
}

// ── Benchmark ──
function runBench(){
    const t0=performance.now();
    for(let i=0;i<100000;i++){const m=UNITS[i%27].m*1.5;const r=m/UNITS[(i+7)%27].m;}
    const us=((performance.now()-t0)/100000*1000).toFixed(2);
    const el=document.getElementById('st-bench');if(el)el.textContent=us;
}

// ── Scroll reveal ──
const obs=new IntersectionObserver(entries=>{entries.forEach(e=>{if(e.isIntersecting)e.target.classList.add('visible');});},{threshold:.1,rootMargin:'0px 0px -40px 0px'});
document.querySelectorAll('.fade-up').forEach(el=>obs.observe(el));

// ── Init ──
initStarfield(document.getElementById('hero-canvas'),250);
initStarfield(document.getElementById('cta-canvas'),150);
initScale();
buildCatGrid();
initConverter();
runBench();

// ── PWA + Quantum Sync ──
if('serviceWorker' in navigator)navigator.serviceWorker.register('sw.js').catch(()=>{});
// ===== QUANTUM PREFIX LIVE SYNC =====
if(QP){
    QP.onStateChange(function(source,state){if(source==='freya-landing'||!state)return;});
    QP.broadcastState('freya-landing',{coverage:0,totalLines:0,classifiedLines:0,prefixCounts:{},role:'showcase'});
    QP.requestStateSync();
}
})();
</script>
</body>
</html>
